var app={};app._body=$("body"),app.utils={randomIntegerBt:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var o=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[o],t[o]=r}return t}},app.artGrid={_grid:$(".art-grid"),_items:$(".art-grid").children(".grid__item"),_widths:["two-twelfths","three-twelfths","three-twelfths","four-twelfths","four-twelfths","four-twelfths","four-twelfths","five-twelfths"],resizeItem:function(t){var e=app.artGrid._widths;t.removeClass("large--one-quarter").addClass(function(){return"large--"+e[app.utils.randomIntegerBt(0,e.length-1)]})},showItems:function(t){t="undefined"==typeof t,this._items.toggleClass("visible",t)},layout:function(){var t=app.artGrid._grid,e=app.artGrid._items;t.length>0&&t.imagesLoaded(function(){e.each(function(){app.artGrid.resizeItem($(this))});var t=window.shuffle,o=document.querySelector(".art-grid");new t(o,{itemSelector:".art-grid .grid__item",sizer:".art-grid--sizer",initialSort:{randomize:!0}}),app.artGrid.showItems()})},remove:function(){this._grid.removeClass("art-grid--enabled").addClass("grid-uniform"),this._items.removeAttr("style"),this.showItems()}},app.lbox=function(){var t=$("#lightbox"),e=$("body"),o=function(){e.removeClass("lightbox-visible")};$(document).on("click","[data-lbox]",function(){var o=$(window).width()<=768,r=o?$(this).attr("data-lbox-m"):$(this).attr("data-lbox");e.addClass("lightbox-visible"),t.find(".content").css("background-image","url("+r+")").html('<img src="'+r+'" >'),t.toggleClass("img-can-overflow",o)}),$(document).on("click","a.product-single__thumbnail",function(){$("#featuredImgLink").attr("data-lbox",$(this).data("lbox-asset")).attr("data-lbox-m",$(this).data("lbox-m-asset"))}),$(document).on("click","#lightbox .content",function(){if(t.hasClass("img-can-overflow"))t.removeClass("img-can-overflow").scrollTop(0);else{t.addClass("img-can-overflow");var e=t.find(".content").outerHeight()-t.height(),o=t.find(".content").outerWidth()-t.width();t.scrollTop(e/2).scrollLeft(o/2)}}),$(document).on("click","#closeLightboxBtn",o),$(document).on("keydown",function(t){27===t.keyCode&&o()})},app.colorBar=function(t){t="undefined"==typeof t?$(window).scrollTop():t,t+$(window).height()<$("#colorBarStatic").offset().top?app._body.addClass("colorbar-fixed"):app._body.removeClass("colorbar-fixed")},app.over18check=function(){var t=$("#overlay18Plus");if(t.length>0){var e=sessionStorage.getItem("over18");console.log("over 18?: "+e),null!==e&&"true"===e||t.removeClass("visually-hidden"),$(document).on("click","#confirmOver18",function(){sessionStorage.setItem("over18",!0),t.addClass("visually-hidden")}),$(document).on("click","#denyOver18",function(){sessionStorage.setItem("over18",!1),t.attr("data-state","locked")})}},app.searchBar=function(){$(document).on("click",".site-header__search-bar-toggle",function(){$("#headerSearchBar").toggle()})},app.scrollHandler=function(){var t=$(window).scrollTop();app.colorBar(t)},$(function(){app.artGrid.layout(),app.colorBar(),app.over18check(),app.lbox(),app.searchBar(),$(window).scroll(app.scrollHandler)});