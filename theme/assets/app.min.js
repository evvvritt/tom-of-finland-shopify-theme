var app={};app._body=$("body"),app.utils={randomIntegerBt:function(r,t){return Math.floor(Math.random()*(t-r+1)+r)},shuffleArray:function(r){for(var t=r.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),a=r[t];r[t]=r[e],r[e]=a}return r}},app.artGrid={_grid:".art-grid",_item_selector:".grid__item",_widths:["20%","25%","33%","33%","33%","41.66%"],getItemTopPosition:function(r,t,e,a){for(var o=!1,i=0,s=0;s<r[0].length;s++)if(rowItem=r[0][s],i=i<rowItem.offset_y?rowItem.offset_y:i,barrier=s===r[0].length-1?a:rowItem.offset_x,!(t>barrier)&&e<barrier-t){o=i;break}return o},resizeItem:function(r){var t=app.artGrid._widths;r.removeClass("large--one-quarter").css({width:function(){return t[app.utils.randomIntegerBt(0,t.length-1)]}})},showItems:function(r){$(app.artGrid._grid).children(app.artGrid._item_selector).toggleClass("visible",r)},layout:function(){var r=$(app.artGrid._grid),t=r.children(app.artGrid._item_selector),e=app.utils.randomIntegerBt;if($(window).width()>768){var a=[[]],o=0,i=r.width(),s=e(o,i/4),n=0,p=0;t.each(function(){app.artGrid.resizeItem($(this))}),t=app.utils.shuffleArray(t),r.imagesLoaded(function(){t.each(function(r){var t=$(this),o=t.outerWidth(),d=t.outerHeight(),l=function(){s=e(0,i/8),a.push([]),a.length>2&&a.shift()};if(s+o>i&&l(),a.length>1){var f=app.artGrid.getItemTopPosition(a,s,o,i);f===!1?(l(),n=a[0][0].offset_y):n=f}n=e(0,3)>0?n+e(0,i/12):n,t.css({left:s,top:n});var u={offset_x:s+o,offset_y:n+d};a[a.length-1].push(u),s+=o,p=n+d>p?n+d:p}),r.css("height",p).addClass("art-grid--enabled").removeClass("wrapper grid-uniform"),app.artGrid.showItems()})}else r.removeClass("art-grid--enabled").addClass("grid-uniform"),t.removeAttr("style"),app.artGrid.showItems()}},app.colorBar=function(r){r+$(window).height()<$("#siteFooter").offset().top?app._body.addClass("colorbar-fixed"):app._body.removeClass("colorbar-fixed")},app.scrollHandler=function(){var r=$(window).scrollTop();app.colorBar(r)},$(function(){app.artGrid.layout();var r;$(window).resize(function(){app.artGrid.showItems(!1),clearTimeout(r),r=setTimeout(function(){app.artGrid.layout()},500)}),$(window).scroll(app.scrollHandler)});