var app={};app._body=$("body"),app.utils={randomIntegerBt:function(t,r){return Math.floor(Math.random()*(r-t+1)+t)},shuffleArray:function(t){for(var r=t.length-1;r>0;r--){var e=Math.floor(Math.random()*(r+1)),o=t[r];t[r]=t[e],t[e]=o}return t}},app.artGrid={_grid:$(".art-grid"),_items:$(".art-grid").children(".grid__item"),_widths:["20%","25%","33%","33%","33%","41.66%"],getItemTopPosition:function(t,r,e,o){for(var i=!1,a=0,s=0;s<t[0].length;s++)if(rowItem=t[0][s],a=a<rowItem.offset_y?rowItem.offset_y:a,barrier=s===t[0].length-1?o:rowItem.offset_x,!(r>barrier)&&e<barrier-r){i=a;break}return i},resizeItem:function(t){var r=app.artGrid._widths;t.removeClass("large--one-quarter").css({width:function(){return r[app.utils.randomIntegerBt(0,r.length-1)]}})},showItems:function(t){this._items.toggleClass("visible",t)},layout:function(){var t=app.artGrid._grid,r=app.artGrid._items,e=app.utils.randomIntegerBt;if($(window).width()>768){var o=[[]],i=0,a=t.width(),s=e(i,a/4),n=0,d=0;r.each(function(){app.artGrid.resizeItem($(this))}),r=app.utils.shuffleArray(r),t.imagesLoaded(function(){r.each(function(t){var r=$(this),i=r.outerWidth(),p=r.outerHeight(),l=function(){s=e(0,a/8),o.push([]),o.length>2&&o.shift()};if(s+i>a&&l(),o.length>1){var f=app.artGrid.getItemTopPosition(o,s,i,a);f===!1?(l(),n=o[0][0].offset_y):n=f}n=e(0,3)>0?n+e(0,a/12):n,r.css({left:s,top:n});var h={offset_x:s+i,offset_y:n+p};o[o.length-1].push(h),s+=i,d=n+p>d?n+p:d}),t.css("height",d).addClass("art-grid--enabled").removeClass("wrapper grid-uniform"),this.showItems()})}else this.remove()},remove:function(){this._grid.removeClass("art-grid--enabled").addClass("grid-uniform"),this._items.removeAttr("style"),this.showItems()}},app.colorBar=function(t){t+$(window).height()<$("#siteFooter").offset().top?app._body.addClass("colorbar-fixed"):app._body.removeClass("colorbar-fixed")},app.scrollHandler=function(){var t=$(window).scrollTop();app.colorBar(t)},$(function(){app.artGrid.layout();var t;$(window).resize(function(){$(window).width()>768&&app.artGrid.showItems(!1),clearTimeout(t),t=setTimeout(function(){app.artGrid.layout()},500)}),$(window).scroll(app.scrollHandler)});