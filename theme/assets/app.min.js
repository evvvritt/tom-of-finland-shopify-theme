var app={};app._body=$("body"),app.utils={randomIntegerBt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},shuffleArray:function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[r],e[r]=o}return e}},app.artGrid={_grid:$(".art-grid"),_items:$(".art-grid").children(".grid__item"),_widths:["20%","30%","30%","30%","40%"],resizeItem:function(e){var t=app.artGrid._widths;e.removeClass("large--one-quarter").css({width:function(){return t[app.utils.randomIntegerBt(0,t.length-1)]}})},showItems:function(e){e="undefined"==typeof e,this._items.toggleClass("visible",e)},layout:function(){var e=app.artGrid._grid,t=app.artGrid._items,r=app.utils.randomIntegerBt;if($(window).width()>768){var o=[[]],i=0,a=e.width(),n=r(i,a/12),d=0,s=0,l=100;this._grid.addClass("art-grid--enabled").removeClass("wrapper grid-uniform"),t.each(function(){app.artGrid.resizeItem($(this))}),t=app.utils.shuffleArray(t),e.imagesLoaded(function(){t.each(function(e){var t=$(this),i=t.outerWidth(),l=t.outerHeight(),p=function(){o.push([]),o.length>2&&o.shift(),n=0,t.prepend("new row â€” ")};if(t.prepend(" - width: "+i),n+i>a&&p(),t.prepend(e),o.length>1){for(var c=!1,h=0;h<o[0].length;h++){var u=o[0][h],f=o[0][h+1],g=o[0].length-1,m=h===g,v=m?a:f.leftEdge;if(!(n>v)){if(i<=v-n){c=u.bottomEdge;break}m||(n=u.bottomEdge>f.bottomEdge?u.rightEdge:n)}}c===!1?(p(),d=o[0][0].bottomEdge):d=c}else d=r(1,3)>2?d+r(0,30):d;t.css({left:n,top:d});var w={width:i,leftEdge:n,rightEdge:n+i,bottomEdge:d+l};o[o.length-1].push(w),n+=i,s=d+l>s?d+l:s}),e.css("height",s+l),app.artGrid.showItems()})}else this.remove()},remove:function(){this._grid.removeClass("art-grid--enabled").addClass("grid-uniform"),this._items.removeAttr("style"),this.showItems()}},app.colorBar=function(e){e="undefined"==typeof e?$(window).scrollTop():e,e+$(window).height()<$("#colorBarStatic").offset().top?app._body.addClass("colorbar-fixed"):app._body.removeClass("colorbar-fixed")},app.over18check=function(){var e=$("#overlay18Plus");if(e.length>0){var t=sessionStorage.getItem("over18");console.log("over 18?: "+t),null!==t&&"true"===t||e.removeClass("visually-hidden"),$(document).on("click","#confirmOver18",function(){sessionStorage.setItem("over18",!0),e.addClass("visually-hidden")}),$(document).on("click","#denyOver18",function(){sessionStorage.setItem("over18",!1),e.attr("data-state","locked")})}},app.scrollHandler=function(){var e=$(window).scrollTop();app.colorBar(e)},$(function(){app.artGrid.layout(),app.colorBar(),app.over18check();var e;$(window).resize(function(){$(window).width()>768,clearTimeout(e),e=setTimeout(function(){app.artGrid.layout()},500)}),$(window).scroll(app.scrollHandler)});