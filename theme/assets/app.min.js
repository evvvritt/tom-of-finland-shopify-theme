var app={};app._body=$("body"),app.utils={randomIntegerBt:function(r,t){return Math.floor(Math.random()*(t-r+1)+r)},shuffleArray:function(r){for(var t=r.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),o=r[t];r[t]=r[e],r[e]=o}return r}},app.artGrid={_grid:$(".art-grid"),_items:$(".art-grid").children(".grid__item"),_widths:["20%","25%","33%","33%","33%","41.66%"],getItemTopPosition:function(r,t,e,o){for(var a=!1,i=0,n=0;n<r[0].length;n++)if(rowItem=r[0][n],i=i<rowItem.offset_y?rowItem.offset_y:i,barrier=n===r[0].length-1?o:rowItem.offset_x,!(t>barrier)&&e<barrier-t){a=i;break}return a},resizeItem:function(r){var t=app.artGrid._widths;r.removeClass("large--one-quarter").css({width:function(){return t[app.utils.randomIntegerBt(0,t.length-1)]}})},showItems:function(r){r="undefined"==typeof r,this._items.toggleClass("visible",r)},layout:function(){var r=app.artGrid._grid,t=app.artGrid._items,e=app.utils.randomIntegerBt;if($(window).width()>768){var o=[[]],a=0,i=r.width(),n=e(a,i/4),s=0,d=0,p=200;t.each(function(){app.artGrid.resizeItem($(this))}),t=app.utils.shuffleArray(t),r.imagesLoaded(function(){t.each(function(r){var t=$(this),a=t.outerWidth(),p=t.outerHeight(),l=function(){n=e(0,i/8),o.push([]),o.length>2&&o.shift()};if(n+a>i&&l(),o.length>1){var f=app.artGrid.getItemTopPosition(o,n,a,i);f===!1?(l(),s=o[0][0].offset_y):s=f}s=e(0,3)>0?s+e(0,i/12):s,t.css({left:n,top:s});var h={offset_x:n+a,offset_y:s+p};o[o.length-1].push(h),n+=a,d=s+p>d?s+p:d}),r.css("height",d+p).addClass("art-grid--enabled").removeClass("wrapper grid-uniform"),app.artGrid.showItems()})}else this.remove()},remove:function(){this._grid.removeClass("art-grid--enabled").addClass("grid-uniform"),this._items.removeAttr("style"),this.showItems()}},app.colorBar=function(r){r="undefined"==typeof r?$(window).scrollTop():r,r+$(window).height()<$("#colorBarStatic").offset().top?app._body.addClass("colorbar-fixed"):app._body.removeClass("colorbar-fixed")},app.scrollHandler=function(){var r=$(window).scrollTop();app.colorBar(r)},$(function(){app.artGrid.layout(),app.colorBar();var r;$(window).resize(function(){$(window).width()>768&&app.artGrid.showItems(!1),clearTimeout(r),r=setTimeout(function(){app.artGrid.layout()},500)}),$(window).scroll(app.scrollHandler)});