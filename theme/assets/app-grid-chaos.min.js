$(function(){function t(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),o=t[e];t[e]=t[r],t[r]=o}return t}var e=["two-twelfths","three-twelfths","four-twelfths","five-twelfths","six-twelfths"],r=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},o=(new Array,$(".grid-chaos")),n=o.children(".large--one-quarter"),i=0,a=o.width(),h=i,s=0,f=[[]],l=function(t){for(var e=!1,r=0;r<f[0].length;r++)if(row_item=f[0][r],barrier=r===f[0].length-1?a:row_item.offset_x,h>barrier)console.log("skip");else if(t<barrier-h||t<row_item){e=row_item.bottom_y;break}return e},u=a/3.5>600?a/3:600;n.each(function(){var t=$(this);r(0,e.length-1);t.removeClass("large--one-quarter").css({width:function(){return r(parseInt(a/6),u)},padding:function(){return r(1,2)+"em"}})}),n=t(n),o.imagesLoaded(function(){var t=!0,e=0;n.each(function(o){var n=$(this),u=n.outerWidth(),c=n.outerHeight(),g=function(){h=i,f.push([]),f.length>2&&f.shift()};if(t&&(h=t?r(0,(a-u)/3):h,t=!1),h+u>a&&(g(),console.log("start new row")),f.length>1){var w=l(u);w===!1?(console.log("cant fit"),g(),s=f[0][0].bottom_y):s=w}n.css({position:"absolute",left:h,top:s,opacity:1});var m={offset_x:h+u,bottom_y:s+c};f[f.length-1].push(m),h+=u,e=s+c>e?s+c:e}),o.css("height",e)})});