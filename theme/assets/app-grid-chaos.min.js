$(function(){function t(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),o=t[e];t[e]=t[r],t[r]=o}return t}var e=function(t,e){var r=Math.floor(Math.random()*(e-t+1)+t);return console.log(r+" : "+e),r},r=$(".grid-chaos"),o=r.children(".large--one-quarter"),n=0,i=r.width(),a=e(n,i/4),f=0,s=!1,h=[[]],l=0,u=function(t){for(var e=!1,r=0,o=0;o<h[0].length;o++)if(row_item=h[0][o],r=r<row_item.offset_y?row_item.offset_y:r,barrier=o===h[0].length-1?i:row_item.offset_x,a>barrier)console.log("skip");else if(t<barrier-a){e=r;break}return e},c=["20%","25%","33%","33%","33%","41.66%"];o.each(function(){var t=$(this);t.removeClass("large--one-quarter").css({width:function(){return c[e(0,c.length-1)]}})}),o=t(o),r.imagesLoaded(function(){o.each(function(t){var r=$(this),o=r.outerWidth(),n=r.outerHeight(),c=function(){a=e(0,i/8),h.push([]),h.length>2&&h.shift()};if(a+o>i&&c(),h.length>1){var g=u(o,a);g===!1?(c(),f=h[0][0].offset_y):f=g}f=e(0,3)>0?f+e(0,i/12):f,r.css({position:"absolute",left:a,top:f});var v={offset_x:a+o,offset_y:f+n};h[h.length-1].push(v),a=s!==!1?s:a+o,s=!1,l=f+n>l?f+n:l}),r.css("height",l),o.animate({opacity:1},600)})});